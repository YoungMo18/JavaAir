{"ast":null,"code":"var _jsxFileName = \"/Users/muhammadputra/Desktop/JavaAir/frontend/src/App.js\",\n  _s = $RefreshSig$();\n// import React from \"react\";\n// import { Routes, Route, Navigate, Outlet } from \"react-router-dom\";\n// import { IntroPage } from \"./components/IntroPage\";\n// import { LoginPage } from \"./components/LoginPage\";\n// import { FlightPage } from \"./components/FlightPage\";\n// import { SignUpPage } from \"./components/SignUpPage\";\n// import { HistoryPage } from \"./components/HistoryPage\";\n// import { PostPage } from \"./components/PostPage\";\n// import { DetailFlightPage } from \"./components/DetailFlightPage\";\n\n// function RequireAuth(props) {\n//   let login = props.login;\n//   let loggedIn = localStorage.getItem(\"loggedIn\");\n//   if (loggedIn === login) {\n//     return <Outlet />;\n//   } else {\n//     return <Navigate to=\"/login\" />;\n//   }\n// }\n\n// function App(props) {\n//   return (\n//     <Routes>\n//       <Route path=\"/intro\" element={<IntroPage />} />\n//       <Route path=\"/login\" element={<LoginPage />} />\n//       <Route path=\"/signup\" element={<SignUpPage />} />\n//       <Route path=\"/flight_detail/:flight\" element={<DetailFlightPage />} />\n//       <Route element={<RequireAuth login=\"user\" />}>\n//         <Route path=\"/history\" element={<HistoryPage />} />\n//         <Route path=\"/book\" element={<FlightPage />} />\n//       </Route>\n//       <Route element={<RequireAuth login=\"worker\" />}>\n//         <Route path=\"/post\" element={<PostPage />} />\n//       </Route>\n//       <Route path=\"*\" element={<Navigate to=\"/book\" />} />\n//     </Routes>\n//   );\n// }\n\n// export default App;\n\nimport React from \"react\";\nimport { Routes, Route, Navigate, Outlet } from \"react-router-dom\";\nimport { IntroPage } from \"./components/IntroPage\";\nimport { LoginPage } from \"./components/LoginPage\";\nimport { FlightPage } from \"./components/FlightPage\";\nimport { SignUpPage } from \"./components/SignUpPage\";\nimport { HistoryPage } from \"./components/HistoryPage\";\nimport { PostPage } from \"./components/PostPage\";\nimport { DetailFlightPage } from \"./components/DetailFlightPage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RequireAuth({\n  requiredUserType\n}) {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = React.useState(false);\n  const [userType, setUserType] = React.useState(\"\");\n  const [loading, setLoading] = React.useState(true);\n  React.useEffect(() => {\n    const checkSession = async () => {\n      try {\n        const response = await fetch(\"/api/v3/users/myIdentity\", {\n          credentials: \"include\" // Ensures session cookies are sent\n        });\n        const data = await response.json();\n        if (data.status === \"loggedin\") {\n          setIsAuthenticated(true);\n          setUserType(data.userInfo.userType);\n        }\n      } catch (err) {\n        console.error(\"Error verifying session:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    checkSession();\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 23\n  }, this);\n  if (!isAuthenticated || userType !== requiredUserType) return /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 12\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 10\n  }, this);\n}\n_s(RequireAuth, \"fe+Stp5VQEbdDJ1xKnkBfI9fb2A=\");\n_c = RequireAuth;\nfunction App(props) {\n  return /*#__PURE__*/_jsxDEV(Routes, {\n    children: [/*#__PURE__*/_jsxDEV(Route, {\n      path: \"/intro\",\n      element: /*#__PURE__*/_jsxDEV(IntroPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 37\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/login\",\n      element: /*#__PURE__*/_jsxDEV(LoginPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 37\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/signup\",\n      element: /*#__PURE__*/_jsxDEV(SignUpPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 38\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/flight_detail/:flight\",\n      element: /*#__PURE__*/_jsxDEV(DetailFlightPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 53\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      element: /*#__PURE__*/_jsxDEV(RequireAuth, {\n        requiredUserType: \"user\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 23\n      }, this),\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/history\",\n        element: /*#__PURE__*/_jsxDEV(HistoryPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/book\",\n        element: /*#__PURE__*/_jsxDEV(FlightPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      element: /*#__PURE__*/_jsxDEV(RequireAuth, {\n        requiredUserType: \"worker\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 23\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/post\",\n        element: /*#__PURE__*/_jsxDEV(PostPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"*\",\n      element: /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/book\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 32\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n}\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"RequireAuth\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","Routes","Route","Navigate","Outlet","IntroPage","LoginPage","FlightPage","SignUpPage","HistoryPage","PostPage","DetailFlightPage","jsxDEV","_jsxDEV","RequireAuth","requiredUserType","_s","isAuthenticated","setIsAuthenticated","useState","userType","setUserType","loading","setLoading","useEffect","checkSession","response","fetch","credentials","data","json","status","userInfo","err","console","error","children","fileName","_jsxFileName","lineNumber","columnNumber","to","_c","App","props","path","element","_c2","$RefreshReg$"],"sources":["/Users/muhammadputra/Desktop/JavaAir/frontend/src/App.js"],"sourcesContent":["// import React from \"react\";\n// import { Routes, Route, Navigate, Outlet } from \"react-router-dom\";\n// import { IntroPage } from \"./components/IntroPage\";\n// import { LoginPage } from \"./components/LoginPage\";\n// import { FlightPage } from \"./components/FlightPage\";\n// import { SignUpPage } from \"./components/SignUpPage\";\n// import { HistoryPage } from \"./components/HistoryPage\";\n// import { PostPage } from \"./components/PostPage\";\n// import { DetailFlightPage } from \"./components/DetailFlightPage\";\n\n// function RequireAuth(props) {\n//   let login = props.login;\n//   let loggedIn = localStorage.getItem(\"loggedIn\");\n//   if (loggedIn === login) {\n//     return <Outlet />;\n//   } else {\n//     return <Navigate to=\"/login\" />;\n//   }\n// }\n\n// function App(props) {\n//   return (\n//     <Routes>\n//       <Route path=\"/intro\" element={<IntroPage />} />\n//       <Route path=\"/login\" element={<LoginPage />} />\n//       <Route path=\"/signup\" element={<SignUpPage />} />\n//       <Route path=\"/flight_detail/:flight\" element={<DetailFlightPage />} />\n//       <Route element={<RequireAuth login=\"user\" />}>\n//         <Route path=\"/history\" element={<HistoryPage />} />\n//         <Route path=\"/book\" element={<FlightPage />} />\n//       </Route>\n//       <Route element={<RequireAuth login=\"worker\" />}>\n//         <Route path=\"/post\" element={<PostPage />} />\n//       </Route>\n//       <Route path=\"*\" element={<Navigate to=\"/book\" />} />\n//     </Routes>\n//   );\n// }\n\n// export default App;\n\nimport React from \"react\";\nimport { Routes, Route, Navigate, Outlet } from \"react-router-dom\";\nimport { IntroPage } from \"./components/IntroPage\";\nimport { LoginPage } from \"./components/LoginPage\";\nimport { FlightPage } from \"./components/FlightPage\";\nimport { SignUpPage } from \"./components/SignUpPage\";\nimport { HistoryPage } from \"./components/HistoryPage\";\nimport { PostPage } from \"./components/PostPage\";\nimport { DetailFlightPage } from \"./components/DetailFlightPage\";\n\nfunction RequireAuth({ requiredUserType }) {\n  const [isAuthenticated, setIsAuthenticated] = React.useState(false);\n  const [userType, setUserType] = React.useState(\"\");\n  const [loading, setLoading] = React.useState(true);\n\n  React.useEffect(() => {\n    const checkSession = async () => {\n      try {\n        const response = await fetch(\"/api/v3/users/myIdentity\", {\n          credentials: \"include\", // Ensures session cookies are sent\n        });\n        const data = await response.json();\n        if (data.status === \"loggedin\") {\n          setIsAuthenticated(true);\n          setUserType(data.userInfo.userType);\n        }\n      } catch (err) {\n        console.error(\"Error verifying session:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    checkSession();\n  }, []);\n\n  if (loading) return <div>Loading...</div>;\n  if (!isAuthenticated || userType !== requiredUserType)\n    return <Navigate to=\"/login\" />;\n  return <Outlet />;\n}\n\nfunction App(props) {\n  return (\n    <Routes>\n      <Route path=\"/intro\" element={<IntroPage />} />\n      <Route path=\"/login\" element={<LoginPage />} />\n      <Route path=\"/signup\" element={<SignUpPage />} />\n      <Route path=\"/flight_detail/:flight\" element={<DetailFlightPage />} />\n      <Route element={<RequireAuth requiredUserType=\"user\" />}>\n        <Route path=\"/history\" element={<HistoryPage />} />\n        <Route path=\"/book\" element={<FlightPage />} />\n      </Route>\n      <Route element={<RequireAuth requiredUserType=\"worker\" />}>\n        <Route path=\"/post\" element={<PostPage />} />\n      </Route>\n      <Route path=\"*\" element={<Navigate to=\"/book\" />} />\n    </Routes>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Navigation}from\"./navigation/Navigation\";import{Footer}from\"./footer/Footer\";import HistoryList from\"./card/HistoryList\";import{getDatabase,ref,onValue}from\"firebase/database\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export function HistoryPage(props){const[historyData,setHistoryData]=useState([]);useEffect(()=>{const db=getDatabase();const username=localStorage.getItem(\"username\");if(!username){console.log(\"No username found in localStorage\");return;}const historyRef=ref(db,\"bookedFlight/\".concat(username));const unregisterFunction=onValue(historyRef,snapshot=>{const userHistoryObject=snapshot.val();if(userHistoryObject){const userHistoryKeys=Object.keys(userHistoryObject);const userHistoryArray=userHistoryKeys.map(key=>{const singleHistoryCopy={...userHistoryObject[key],key};return singleHistoryCopy;});setHistoryData(userHistoryArray);}else{setHistoryData([]);}});return()=>{unregisterFunction();};},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(Navigation,{})}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsx(HistoryList,{historyData:historyData})}),/*#__PURE__*/_jsx(\"footer\",{children:/*#__PURE__*/_jsx(Footer,{})})]});}export default HistoryPage;","map":{"version":3,"names":["React","useState","useEffect","Navigation","Footer","HistoryList","getDatabase","ref","onValue","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","HistoryPage","props","historyData","setHistoryData","db","username","localStorage","getItem","console","log","historyRef","concat","unregisterFunction","snapshot","userHistoryObject","val","userHistoryKeys","Object","keys","userHistoryArray","map","key","singleHistoryCopy","children"],"sources":["/Users/muhammadputra/Desktop/JavaAir/frontend/src/components/HistoryPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Navigation } from \"./navigation/Navigation\";\nimport { Footer } from \"./footer/Footer\";\nimport HistoryList from \"./card/HistoryList\";\nimport { getDatabase, ref, onValue } from \"firebase/database\";\n\nexport function HistoryPage(props) {\n  const [historyData, setHistoryData] = useState([]);\n\n  useEffect(() => {\n    const db = getDatabase();\n    const username = localStorage.getItem(\"username\");\n\n    if (!username) {\n      console.log(\"No username found in localStorage\");\n      return;\n    }\n\n    const historyRef = ref(db, `bookedFlight/${username}`);\n\n    const unregisterFunction = onValue(historyRef, (snapshot) => {\n      const userHistoryObject = snapshot.val();\n      if (userHistoryObject) {\n        const userHistoryKeys = Object.keys(userHistoryObject);\n        const userHistoryArray = userHistoryKeys.map((key) => {\n          const singleHistoryCopy = { ...userHistoryObject[key], key };\n          return singleHistoryCopy;\n        });\n        setHistoryData(userHistoryArray);\n      } else {\n        setHistoryData([]);\n      }\n    });\n    return () => {\n      unregisterFunction();\n    };\n  }, []);\n\n  return (\n    <>\n      <header>\n        <Navigation />\n      </header>\n      <main>\n        <HistoryList historyData={historyData} />\n      </main>\n      <footer>\n        <Footer />\n      </footer>\n    </>\n  );\n}\n\nexport default HistoryPage;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,UAAU,KAAQ,yBAAyB,CACpD,OAASC,MAAM,KAAQ,iBAAiB,CACxC,MAAO,CAAAC,WAAW,KAAM,oBAAoB,CAC5C,OAASC,WAAW,CAAEC,GAAG,CAAEC,OAAO,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9D,MAAO,SAAS,CAAAC,WAAWA,CAACC,KAAK,CAAE,CACjC,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAElDC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiB,EAAE,CAAGb,WAAW,CAAC,CAAC,CACxB,KAAM,CAAAc,QAAQ,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAEjD,GAAI,CAACF,QAAQ,CAAE,CACbG,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC,CAChD,OACF,CAEA,KAAM,CAAAC,UAAU,CAAGlB,GAAG,CAACY,EAAE,iBAAAO,MAAA,CAAkBN,QAAQ,CAAE,CAAC,CAEtD,KAAM,CAAAO,kBAAkB,CAAGnB,OAAO,CAACiB,UAAU,CAAGG,QAAQ,EAAK,CAC3D,KAAM,CAAAC,iBAAiB,CAAGD,QAAQ,CAACE,GAAG,CAAC,CAAC,CACxC,GAAID,iBAAiB,CAAE,CACrB,KAAM,CAAAE,eAAe,CAAGC,MAAM,CAACC,IAAI,CAACJ,iBAAiB,CAAC,CACtD,KAAM,CAAAK,gBAAgB,CAAGH,eAAe,CAACI,GAAG,CAAEC,GAAG,EAAK,CACpD,KAAM,CAAAC,iBAAiB,CAAG,CAAE,GAAGR,iBAAiB,CAACO,GAAG,CAAC,CAAEA,GAAI,CAAC,CAC5D,MAAO,CAAAC,iBAAiB,CAC1B,CAAC,CAAC,CACFnB,cAAc,CAACgB,gBAAgB,CAAC,CAClC,CAAC,IAAM,CACLhB,cAAc,CAAC,EAAE,CAAC,CACpB,CACF,CAAC,CAAC,CACF,MAAO,IAAM,CACXS,kBAAkB,CAAC,CAAC,CACtB,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEb,KAAA,CAAAF,SAAA,EAAA0B,QAAA,eACE5B,IAAA,WAAA4B,QAAA,cACE5B,IAAA,CAACP,UAAU,GAAE,CAAC,CACR,CAAC,cACTO,IAAA,SAAA4B,QAAA,cACE5B,IAAA,CAACL,WAAW,EAACY,WAAW,CAAEA,WAAY,CAAE,CAAC,CACrC,CAAC,cACPP,IAAA,WAAA4B,QAAA,cACE5B,IAAA,CAACN,MAAM,GAAE,CAAC,CACJ,CAAC,EACT,CAAC,CAEP,CAEA,cAAe,CAAAW,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
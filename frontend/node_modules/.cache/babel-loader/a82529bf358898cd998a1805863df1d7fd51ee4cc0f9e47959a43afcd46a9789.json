{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link,NavLink,useNavigate}from\"react-router-dom\";import{Hamburger}from\"./Hamburger\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function Navigation(props){const[hamburgerOpen,setHamburgerOpen]=useState(false);const[navClass,setNavClass]=useState(\"nav\");const[navClassContainer,setNavClassContainer]=useState(\"menu\");const[history,setHistory]=useState(\"hidden\");const[post,setPost]=useState(\"hidden\");const[book,setBook]=useState(\"show\");const[login,setLogin]=useState(\"show\");const[logout,setLogout]=useState(\"hidden\");const navigate=useNavigate();const toggleHamburger=()=>{setHamburgerOpen(!hamburgerOpen);if(!hamburgerOpen){setNavClass(\"nav-open\");setNavClassContainer(\"menu open\");}else{setNavClass(\"nav\");setNavClassContainer(\"menu\");}};const handleLogout=async()=>{try{await fetch(\"/api/v3/users/logout\",{method:\"POST\"});setHistory(\"hidden\");setPost(\"hidden\");setBook(\"show\");setLogin(\"show\");setLogout(\"hidden\");navigate(\"/login\");}catch(err){console.error(\"Error during logout:\",err);}};useEffect(()=>{const checkSession=async()=>{try{const response=await fetch(\"/api/v3/users/myIdentity\");const data=await response.json();if(data.status===\"loggedin\"){setLogin(\"hidden\");setLogout(\"show\");if(data.userInfo.userType===\"user\"){setHistory(\"show\");setPost(\"hidden\");setBook(\"show\");// Users can see \"Book\"\n}else if(data.userInfo.userType===\"worker\"){setHistory(\"hidden\");setPost(\"show\");setBook(\"hidden\");// Workers cannot see \"Book\"\n}}else{// Guest settings\nsetHistory(\"hidden\");setPost(\"hidden\");setBook(\"show\");// Guests can see \"Book\"\nsetLogin(\"show\");setLogout(\"hidden\");}}catch(err){console.error(\"Error fetching user session:\",err);}};checkSession();},[]);return/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:/*#__PURE__*/_jsx(Link,{to:\"/book\",children:\"JavaAir\"})}),/*#__PURE__*/_jsxs(\"div\",{className:navClassContainer,children:[/*#__PURE__*/_jsx(\"div\",{className:\"hamburger\",onClick:toggleHamburger,children:/*#__PURE__*/_jsx(Hamburger,{})}),/*#__PURE__*/_jsx(\"div\",{className:navClass,children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"/intro\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{className:book,children:/*#__PURE__*/_jsx(NavLink,{to:\"/book\",children:\"Book\"})}),/*#__PURE__*/_jsx(\"li\",{className:history,children:/*#__PURE__*/_jsx(NavLink,{to:\"/history\",children:\"History\"})}),/*#__PURE__*/_jsx(\"li\",{className:post,children:/*#__PURE__*/_jsx(NavLink,{to:\"/post\",children:\"Post\"})}),/*#__PURE__*/_jsx(\"li\",{className:login,children:/*#__PURE__*/_jsx(NavLink,{to:\"/login\",children:\"Login\"})}),/*#__PURE__*/_jsx(\"li\",{className:logout,children:/*#__PURE__*/_jsx(\"button\",{className:\"logout\",onClick:handleLogout,children:\"Logout\"})})]})})]})]});}","map":{"version":3,"names":["React","useState","useEffect","Link","NavLink","useNavigate","Hamburger","jsx","_jsx","jsxs","_jsxs","Navigation","props","hamburgerOpen","setHamburgerOpen","navClass","setNavClass","navClassContainer","setNavClassContainer","history","setHistory","post","setPost","book","setBook","login","setLogin","logout","setLogout","navigate","toggleHamburger","handleLogout","fetch","method","err","console","error","checkSession","response","data","json","status","userInfo","userType","children","className","to","onClick"],"sources":["/Users/muhammadputra/Desktop/JavaAir/frontend/src/components/navigation/Navigation.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, NavLink, useNavigate } from \"react-router-dom\";\nimport { Hamburger } from \"./Hamburger\";\n\nexport function Navigation(props) {\n  const [hamburgerOpen, setHamburgerOpen] = useState(false);\n  const [navClass, setNavClass] = useState(\"nav\");\n  const [navClassContainer, setNavClassContainer] = useState(\"menu\");\n  const [history, setHistory] = useState(\"hidden\");\n  const [post, setPost] = useState(\"hidden\");\n  const [book, setBook] = useState(\"show\");\n  const [login, setLogin] = useState(\"show\");\n  const [logout, setLogout] = useState(\"hidden\");\n  const navigate = useNavigate();\n\n  const toggleHamburger = () => {\n    setHamburgerOpen(!hamburgerOpen);\n    if (!hamburgerOpen) {\n      setNavClass(\"nav-open\");\n      setNavClassContainer(\"menu open\");\n    } else {\n      setNavClass(\"nav\");\n      setNavClassContainer(\"menu\");\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      await fetch(\"/api/v3/users/logout\", { method: \"POST\" });\n      setHistory(\"hidden\");\n      setPost(\"hidden\");\n      setBook(\"show\");\n      setLogin(\"show\");\n      setLogout(\"hidden\");\n      navigate(\"/login\");\n    } catch (err) {\n      console.error(\"Error during logout:\", err);\n    }\n  };\n\n  useEffect(() => {\n    const checkSession = async () => {\n      try {\n        const response = await fetch(\"/api/v3/users/myIdentity\");\n        const data = await response.json();\n        if (data.status === \"loggedin\") {\n          setLogin(\"hidden\");\n          setLogout(\"show\");\n          if (data.userInfo.userType === \"user\") {\n            setHistory(\"show\");\n            setPost(\"hidden\");\n            setBook(\"show\"); // Users can see \"Book\"\n          } else if (data.userInfo.userType === \"worker\") {\n            setHistory(\"hidden\");\n            setPost(\"show\");\n            setBook(\"hidden\"); // Workers cannot see \"Book\"\n          }\n        } else {\n          // Guest settings\n          setHistory(\"hidden\");\n          setPost(\"hidden\");\n          setBook(\"show\"); // Guests can see \"Book\"\n          setLogin(\"show\");\n          setLogout(\"hidden\");\n        }\n      } catch (err) {\n        console.error(\"Error fetching user session:\", err);\n      }\n    };\n\n    checkSession();\n  }, []);\n\n  return (\n    <nav>\n      <h1 className=\"title\">\n        <Link to=\"/book\">JavaAir</Link>\n      </h1>\n      <div className={navClassContainer}>\n        {/* Hamburger Icon */}\n        <div className=\"hamburger\" onClick={toggleHamburger}>\n          <Hamburger />\n        </div>\n\n        {/* Navigation Menu */}\n        <div className={navClass}>\n          <ul>\n            <li>\n              <NavLink to=\"/intro\">Home</NavLink>\n            </li>\n            <li className={book}>\n              <NavLink to=\"/book\">Book</NavLink>\n            </li>\n            <li className={history}>\n              <NavLink to=\"/history\">History</NavLink>\n            </li>\n            <li className={post}>\n              <NavLink to=\"/post\">Post</NavLink>\n            </li>\n            <li className={login}>\n              <NavLink to=\"/login\">Login</NavLink>\n            </li>\n            <li className={logout}>\n              <button className=\"logout\" onClick={handleLogout}>\n                Logout\n              </button>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </nav>\n  );\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,CAAEC,OAAO,CAAEC,WAAW,KAAQ,kBAAkB,CAC7D,OAASC,SAAS,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExC,MAAO,SAAS,CAAAC,UAAUA,CAACC,KAAK,CAAE,CAChC,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAACc,QAAQ,CAAEC,WAAW,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACgB,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGjB,QAAQ,CAAC,MAAM,CAAC,CAClE,KAAM,CAACkB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,QAAQ,CAAC,CAChD,KAAM,CAACoB,IAAI,CAAEC,OAAO,CAAC,CAAGrB,QAAQ,CAAC,QAAQ,CAAC,CAC1C,KAAM,CAACsB,IAAI,CAAEC,OAAO,CAAC,CAAGvB,QAAQ,CAAC,MAAM,CAAC,CACxC,KAAM,CAACwB,KAAK,CAAEC,QAAQ,CAAC,CAAGzB,QAAQ,CAAC,MAAM,CAAC,CAC1C,KAAM,CAAC0B,MAAM,CAAEC,SAAS,CAAC,CAAG3B,QAAQ,CAAC,QAAQ,CAAC,CAC9C,KAAM,CAAA4B,QAAQ,CAAGxB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAyB,eAAe,CAAGA,CAAA,GAAM,CAC5BhB,gBAAgB,CAAC,CAACD,aAAa,CAAC,CAChC,GAAI,CAACA,aAAa,CAAE,CAClBG,WAAW,CAAC,UAAU,CAAC,CACvBE,oBAAoB,CAAC,WAAW,CAAC,CACnC,CAAC,IAAM,CACLF,WAAW,CAAC,KAAK,CAAC,CAClBE,oBAAoB,CAAC,MAAM,CAAC,CAC9B,CACF,CAAC,CAED,KAAM,CAAAa,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,KAAK,CAAC,sBAAsB,CAAE,CAAEC,MAAM,CAAE,MAAO,CAAC,CAAC,CACvDb,UAAU,CAAC,QAAQ,CAAC,CACpBE,OAAO,CAAC,QAAQ,CAAC,CACjBE,OAAO,CAAC,MAAM,CAAC,CACfE,QAAQ,CAAC,MAAM,CAAC,CAChBE,SAAS,CAAC,QAAQ,CAAC,CACnBC,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAE,MAAOK,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAEF,GAAG,CAAC,CAC5C,CACF,CAAC,CAEDhC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAmC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAN,KAAK,CAAC,0BAA0B,CAAC,CACxD,KAAM,CAAAO,IAAI,CAAG,KAAM,CAAAD,QAAQ,CAACE,IAAI,CAAC,CAAC,CAClC,GAAID,IAAI,CAACE,MAAM,GAAK,UAAU,CAAE,CAC9Bf,QAAQ,CAAC,QAAQ,CAAC,CAClBE,SAAS,CAAC,MAAM,CAAC,CACjB,GAAIW,IAAI,CAACG,QAAQ,CAACC,QAAQ,GAAK,MAAM,CAAE,CACrCvB,UAAU,CAAC,MAAM,CAAC,CAClBE,OAAO,CAAC,QAAQ,CAAC,CACjBE,OAAO,CAAC,MAAM,CAAC,CAAE;AACnB,CAAC,IAAM,IAAIe,IAAI,CAACG,QAAQ,CAACC,QAAQ,GAAK,QAAQ,CAAE,CAC9CvB,UAAU,CAAC,QAAQ,CAAC,CACpBE,OAAO,CAAC,MAAM,CAAC,CACfE,OAAO,CAAC,QAAQ,CAAC,CAAE;AACrB,CACF,CAAC,IAAM,CACL;AACAJ,UAAU,CAAC,QAAQ,CAAC,CACpBE,OAAO,CAAC,QAAQ,CAAC,CACjBE,OAAO,CAAC,MAAM,CAAC,CAAE;AACjBE,QAAQ,CAAC,MAAM,CAAC,CAChBE,SAAS,CAAC,QAAQ,CAAC,CACrB,CACF,CAAE,MAAOM,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,8BAA8B,CAAEF,GAAG,CAAC,CACpD,CACF,CAAC,CAEDG,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE3B,KAAA,QAAAkC,QAAA,eACEpC,IAAA,OAAIqC,SAAS,CAAC,OAAO,CAAAD,QAAA,cACnBpC,IAAA,CAACL,IAAI,EAAC2C,EAAE,CAAC,OAAO,CAAAF,QAAA,CAAC,SAAO,CAAM,CAAC,CAC7B,CAAC,cACLlC,KAAA,QAAKmC,SAAS,CAAE5B,iBAAkB,CAAA2B,QAAA,eAEhCpC,IAAA,QAAKqC,SAAS,CAAC,WAAW,CAACE,OAAO,CAAEjB,eAAgB,CAAAc,QAAA,cAClDpC,IAAA,CAACF,SAAS,GAAE,CAAC,CACV,CAAC,cAGNE,IAAA,QAAKqC,SAAS,CAAE9B,QAAS,CAAA6B,QAAA,cACvBlC,KAAA,OAAAkC,QAAA,eACEpC,IAAA,OAAAoC,QAAA,cACEpC,IAAA,CAACJ,OAAO,EAAC0C,EAAE,CAAC,QAAQ,CAAAF,QAAA,CAAC,MAAI,CAAS,CAAC,CACjC,CAAC,cACLpC,IAAA,OAAIqC,SAAS,CAAEtB,IAAK,CAAAqB,QAAA,cAClBpC,IAAA,CAACJ,OAAO,EAAC0C,EAAE,CAAC,OAAO,CAAAF,QAAA,CAAC,MAAI,CAAS,CAAC,CAChC,CAAC,cACLpC,IAAA,OAAIqC,SAAS,CAAE1B,OAAQ,CAAAyB,QAAA,cACrBpC,IAAA,CAACJ,OAAO,EAAC0C,EAAE,CAAC,UAAU,CAAAF,QAAA,CAAC,SAAO,CAAS,CAAC,CACtC,CAAC,cACLpC,IAAA,OAAIqC,SAAS,CAAExB,IAAK,CAAAuB,QAAA,cAClBpC,IAAA,CAACJ,OAAO,EAAC0C,EAAE,CAAC,OAAO,CAAAF,QAAA,CAAC,MAAI,CAAS,CAAC,CAChC,CAAC,cACLpC,IAAA,OAAIqC,SAAS,CAAEpB,KAAM,CAAAmB,QAAA,cACnBpC,IAAA,CAACJ,OAAO,EAAC0C,EAAE,CAAC,QAAQ,CAAAF,QAAA,CAAC,OAAK,CAAS,CAAC,CAClC,CAAC,cACLpC,IAAA,OAAIqC,SAAS,CAAElB,MAAO,CAAAiB,QAAA,cACpBpC,IAAA,WAAQqC,SAAS,CAAC,QAAQ,CAACE,OAAO,CAAEhB,YAAa,CAAAa,QAAA,CAAC,QAElD,CAAQ,CAAC,CACP,CAAC,EACH,CAAC,CACF,CAAC,EACH,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
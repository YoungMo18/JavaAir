{"ast":null,"code":"// import React from \"react\";\n// import { Routes, Route, Navigate, Outlet } from \"react-router-dom\";\n// import { IntroPage } from \"./components/IntroPage\";\n// import { LoginPage } from \"./components/LoginPage\";\n// import { FlightPage } from \"./components/FlightPage\";\n// import { SignUpPage } from \"./components/SignUpPage\";\n// import { HistoryPage } from \"./components/HistoryPage\";\n// import { PostPage } from \"./components/PostPage\";\n// import { DetailFlightPage } from \"./components/DetailFlightPage\";\n// function RequireAuth(props) {\n//   let login = props.login;\n//   let loggedIn = localStorage.getItem(\"loggedIn\");\n//   if (loggedIn === login) {\n//     return <Outlet />;\n//   } else {\n//     return <Navigate to=\"/login\" />;\n//   }\n// }\n// function App(props) {\n//   return (\n//     <Routes>\n//       <Route path=\"/intro\" element={<IntroPage />} />\n//       <Route path=\"/login\" element={<LoginPage />} />\n//       <Route path=\"/signup\" element={<SignUpPage />} />\n//       <Route path=\"/flight_detail/:flight\" element={<DetailFlightPage />} />\n//       <Route element={<RequireAuth login=\"user\" />}>\n//         <Route path=\"/history\" element={<HistoryPage />} />\n//         <Route path=\"/book\" element={<FlightPage />} />\n//       </Route>\n//       <Route element={<RequireAuth login=\"worker\" />}>\n//         <Route path=\"/post\" element={<PostPage />} />\n//       </Route>\n//       <Route path=\"*\" element={<Navigate to=\"/book\" />} />\n//     </Routes>\n//   );\n// }\n// export default App;\nimport React from\"react\";import{Routes,Route,Navigate,Outlet}from\"react-router-dom\";import{IntroPage}from\"./components/IntroPage\";import{LoginPage}from\"./components/LoginPage\";import{FlightPage}from\"./components/FlightPage\";import{SignUpPage}from\"./components/SignUpPage\";import{HistoryPage}from\"./components/HistoryPage\";import{PostPage}from\"./components/PostPage\";import{DetailFlightPage}from\"./components/DetailFlightPage\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function RequireAuth(_ref){let{requiredUserType}=_ref;const[isAuthenticated,setIsAuthenticated]=React.useState(false);const[userType,setUserType]=React.useState(\"\");const[loading,setLoading]=React.useState(true);React.useEffect(()=>{const checkSession=async()=>{try{const response=await fetch(\"/api/v3/users/myIdentity\");const data=await response.json();if(data.status===\"loggedin\"){setIsAuthenticated(true);setUserType(data.userInfo.userType);}}catch(err){console.error(\"Error verifying session:\",err);}finally{setLoading(false);}};checkSession();},[]);if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(!isAuthenticated||userType!==requiredUserType)return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});return/*#__PURE__*/_jsx(Outlet,{});}function App(props){return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/intro\",element:/*#__PURE__*/_jsx(IntroPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(SignUpPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/flight_detail/:flight\",element:/*#__PURE__*/_jsx(DetailFlightPage,{})}),/*#__PURE__*/_jsxs(Route,{element:/*#__PURE__*/_jsx(RequireAuth,{login:\"user\"}),children:[/*#__PURE__*/_jsx(Route,{path:\"/history\",element:/*#__PURE__*/_jsx(HistoryPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/book\",element:/*#__PURE__*/_jsx(FlightPage,{})})]}),/*#__PURE__*/_jsx(Route,{element:/*#__PURE__*/_jsx(RequireAuth,{login:\"worker\"}),children:/*#__PURE__*/_jsx(Route,{path:\"/post\",element:/*#__PURE__*/_jsx(PostPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/book\"})})]});}export default App;","map":{"version":3,"names":["React","Routes","Route","Navigate","Outlet","IntroPage","LoginPage","FlightPage","SignUpPage","HistoryPage","PostPage","DetailFlightPage","jsx","_jsx","jsxs","_jsxs","RequireAuth","_ref","requiredUserType","isAuthenticated","setIsAuthenticated","useState","userType","setUserType","loading","setLoading","useEffect","checkSession","response","fetch","data","json","status","userInfo","err","console","error","children","to","App","props","path","element","login"],"sources":["/Users/muhammadputra/Desktop/JavaAir/frontend/src/App.js"],"sourcesContent":["// import React from \"react\";\n// import { Routes, Route, Navigate, Outlet } from \"react-router-dom\";\n// import { IntroPage } from \"./components/IntroPage\";\n// import { LoginPage } from \"./components/LoginPage\";\n// import { FlightPage } from \"./components/FlightPage\";\n// import { SignUpPage } from \"./components/SignUpPage\";\n// import { HistoryPage } from \"./components/HistoryPage\";\n// import { PostPage } from \"./components/PostPage\";\n// import { DetailFlightPage } from \"./components/DetailFlightPage\";\n\n// function RequireAuth(props) {\n//   let login = props.login;\n//   let loggedIn = localStorage.getItem(\"loggedIn\");\n//   if (loggedIn === login) {\n//     return <Outlet />;\n//   } else {\n//     return <Navigate to=\"/login\" />;\n//   }\n// }\n\n// function App(props) {\n//   return (\n//     <Routes>\n//       <Route path=\"/intro\" element={<IntroPage />} />\n//       <Route path=\"/login\" element={<LoginPage />} />\n//       <Route path=\"/signup\" element={<SignUpPage />} />\n//       <Route path=\"/flight_detail/:flight\" element={<DetailFlightPage />} />\n//       <Route element={<RequireAuth login=\"user\" />}>\n//         <Route path=\"/history\" element={<HistoryPage />} />\n//         <Route path=\"/book\" element={<FlightPage />} />\n//       </Route>\n//       <Route element={<RequireAuth login=\"worker\" />}>\n//         <Route path=\"/post\" element={<PostPage />} />\n//       </Route>\n//       <Route path=\"*\" element={<Navigate to=\"/book\" />} />\n//     </Routes>\n//   );\n// }\n\n// export default App;\n\nimport React from \"react\";\nimport { Routes, Route, Navigate, Outlet } from \"react-router-dom\";\nimport { IntroPage } from \"./components/IntroPage\";\nimport { LoginPage } from \"./components/LoginPage\";\nimport { FlightPage } from \"./components/FlightPage\";\nimport { SignUpPage } from \"./components/SignUpPage\";\nimport { HistoryPage } from \"./components/HistoryPage\";\nimport { PostPage } from \"./components/PostPage\";\nimport { DetailFlightPage } from \"./components/DetailFlightPage\";\n\nfunction RequireAuth({ requiredUserType }) {\n  const [isAuthenticated, setIsAuthenticated] = React.useState(false);\n  const [userType, setUserType] = React.useState(\"\");\n  const [loading, setLoading] = React.useState(true);\n\n  React.useEffect(() => {\n    const checkSession = async () => {\n      try {\n        const response = await fetch(\"/api/v3/users/myIdentity\");\n        const data = await response.json();\n        if (data.status === \"loggedin\") {\n          setIsAuthenticated(true);\n          setUserType(data.userInfo.userType);\n        }\n      } catch (err) {\n        console.error(\"Error verifying session:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    checkSession();\n  }, []);\n\n  if (loading) return <div>Loading...</div>;\n  if (!isAuthenticated || userType !== requiredUserType)\n    return <Navigate to=\"/login\" />;\n  return <Outlet />;\n}\n\nfunction App(props) {\n  return (\n    <Routes>\n      <Route path=\"/intro\" element={<IntroPage />} />\n      <Route path=\"/login\" element={<LoginPage />} />\n      <Route path=\"/signup\" element={<SignUpPage />} />\n      <Route path=\"/flight_detail/:flight\" element={<DetailFlightPage />} />\n      <Route element={<RequireAuth login=\"user\" />}>\n        <Route path=\"/history\" element={<HistoryPage />} />\n        <Route path=\"/book\" element={<FlightPage />} />\n      </Route>\n      <Route element={<RequireAuth login=\"worker\" />}>\n        <Route path=\"/post\" element={<PostPage />} />\n      </Route>\n      <Route path=\"*\" element={<Navigate to=\"/book\" />} />\n    </Routes>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
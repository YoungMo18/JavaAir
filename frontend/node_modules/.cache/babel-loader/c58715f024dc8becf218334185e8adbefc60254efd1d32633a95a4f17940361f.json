{"ast":null,"code":"var _jsxFileName = \"/Users/muhammadputra/Desktop/JavaAir/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { Routes, Route, Navigate, Outlet } from \"react-router-dom\";\nimport { IntroPage } from \"./components/IntroPage\";\nimport { LoginPage } from \"./components/LoginPage\";\nimport { FlightPage } from \"./components/FlightPage\";\nimport { SignUpPage } from \"./components/SignUpPage\";\nimport { HistoryPage } from \"./components/HistoryPage\";\nimport { PostPage } from \"./components/PostPage\";\nimport { DetailFlightPage } from \"./components/DetailFlightPage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RequireAuth({\n  allowedUserTypes\n}) {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = React.useState(false);\n  const [userType, setUserType] = React.useState(\"\");\n  const [loading, setLoading] = React.useState(true);\n  React.useEffect(() => {\n    const checkSession = async () => {\n      try {\n        const response = await fetch(\"/api/v3/users/myIdentity\", {\n          credentials: \"include\" // Ensures session cookies are sent\n        });\n        const data = await response.json();\n        if (data.status === \"loggedin\") {\n          setIsAuthenticated(true);\n          setUserType(data.userInfo.userType);\n        }\n      } catch (err) {\n        console.error(\"Error verifying session:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    checkSession();\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 23\n  }, this);\n  if (!isAuthenticated && allowedUserTypes.includes(\"guest\")) return /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 70\n  }, this);\n  if (allowedUserTypes.includes(userType)) return /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 51\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 10\n  }, this);\n}\n_s(RequireAuth, \"fe+Stp5VQEbdDJ1xKnkBfI9fb2A=\");\n_c = RequireAuth;\nfunction App(props) {\n  return /*#__PURE__*/_jsxDEV(Routes, {\n    children: [/*#__PURE__*/_jsxDEV(Route, {\n      path: \"/intro\",\n      element: /*#__PURE__*/_jsxDEV(IntroPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 37\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/login\",\n      element: /*#__PURE__*/_jsxDEV(LoginPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 37\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/signup\",\n      element: /*#__PURE__*/_jsxDEV(SignUpPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 38\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/flight_detail/:flight\",\n      element: /*#__PURE__*/_jsxDEV(DetailFlightPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 53\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      element: /*#__PURE__*/_jsxDEV(RequireAuth, {\n        allowedUserTypes: [\"user\", \"guest\"]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 23\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/book\",\n        element: /*#__PURE__*/_jsxDEV(FlightPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      element: /*#__PURE__*/_jsxDEV(RequireAuth, {\n        allowedUserTypes: [\"user\"]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 23\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/history\",\n        element: /*#__PURE__*/_jsxDEV(HistoryPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      element: /*#__PURE__*/_jsxDEV(RequireAuth, {\n        allowedUserTypes: [\"worker\"]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 23\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/post\",\n        element: /*#__PURE__*/_jsxDEV(PostPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"*\",\n      element: /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/book\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 32\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"RequireAuth\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","Routes","Route","Navigate","Outlet","IntroPage","LoginPage","FlightPage","SignUpPage","HistoryPage","PostPage","DetailFlightPage","jsxDEV","_jsxDEV","RequireAuth","allowedUserTypes","_s","isAuthenticated","setIsAuthenticated","useState","userType","setUserType","loading","setLoading","useEffect","checkSession","response","fetch","credentials","data","json","status","userInfo","err","console","error","children","fileName","_jsxFileName","lineNumber","columnNumber","includes","to","_c","App","props","path","element","_c2","$RefreshReg$"],"sources":["/Users/muhammadputra/Desktop/JavaAir/frontend/src/App.js"],"sourcesContent":["import React from \"react\";\nimport { Routes, Route, Navigate, Outlet } from \"react-router-dom\";\nimport { IntroPage } from \"./components/IntroPage\";\nimport { LoginPage } from \"./components/LoginPage\";\nimport { FlightPage } from \"./components/FlightPage\";\nimport { SignUpPage } from \"./components/SignUpPage\";\nimport { HistoryPage } from \"./components/HistoryPage\";\nimport { PostPage } from \"./components/PostPage\";\nimport { DetailFlightPage } from \"./components/DetailFlightPage\";\n\nfunction RequireAuth({ allowedUserTypes }) {\n  const [isAuthenticated, setIsAuthenticated] = React.useState(false);\n  const [userType, setUserType] = React.useState(\"\");\n  const [loading, setLoading] = React.useState(true);\n\n  React.useEffect(() => {\n    const checkSession = async () => {\n      try {\n        const response = await fetch(\"/api/v3/users/myIdentity\", {\n          credentials: \"include\", // Ensures session cookies are sent\n        });\n        const data = await response.json();\n        if (data.status === \"loggedin\") {\n          setIsAuthenticated(true);\n          setUserType(data.userInfo.userType);\n        }\n      } catch (err) {\n        console.error(\"Error verifying session:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    checkSession();\n  }, []);\n\n  if (loading) return <div>Loading...</div>;\n  if (!isAuthenticated && allowedUserTypes.includes(\"guest\")) return <Outlet />;\n  if (allowedUserTypes.includes(userType)) return <Outlet />;\n  return <Navigate to=\"/login\" />;\n}\n\nfunction App(props) {\n  return (\n    <Routes>\n      <Route path=\"/intro\" element={<IntroPage />} />\n      <Route path=\"/login\" element={<LoginPage />} />\n      <Route path=\"/signup\" element={<SignUpPage />} />\n      <Route path=\"/flight_detail/:flight\" element={<DetailFlightPage />} />\n      {/* Allow anyone except workers to access `/book` */}\n      <Route element={<RequireAuth allowedUserTypes={[\"user\", \"guest\"]} />}>\n        <Route path=\"/book\" element={<FlightPage />} />\n      </Route>\n      {/* Restrict `/history` to logged-in users only */}\n      <Route element={<RequireAuth allowedUserTypes={[\"user\"]} />}>\n        <Route path=\"/history\" element={<HistoryPage />} />\n      </Route>\n      {/* Restrict `/post` to workers only */}\n      <Route element={<RequireAuth allowedUserTypes={[\"worker\"]} />}>\n        <Route path=\"/post\" element={<PostPage />} />\n      </Route>\n      <Route path=\"*\" element={<Navigate to=\"/book\" />} />\n    </Routes>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Navigation}from\"./navigation/Navigation\";import{Footer}from\"./footer/Footer\";import FlightList from\"./card/FlightList\";import{SearchFlightsForm}from\"./form/SearchFlightForm\";import{getDatabase,ref,onValue}from\"firebase/database\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export function FlightPage(props){const[flights,setFlights]=useState([]);const[from,setFrom]=useState(\"\");const[to,setTo]=useState(\"\");const[date,setDate]=useState(\"\");useEffect(()=>{const db=getDatabase();const flightRef=ref(db,\"flight\");const unregisterFunction=onValue(flightRef,snapshot=>{const allFlightObject=snapshot.val();if(allFlightObject){const allFlightKeys=Object.keys(allFlightObject);const allFlightsArray=allFlightKeys.map(key=>{const singleFlightCopy={...allFlightObject[key],key};return singleFlightCopy;});setFlights(allFlightsArray);}else{setFlights([]);}});return()=>{unregisterFunction();};},[]);const applyFilter=(from,to,date)=>{setFrom(from);setTo(to);setDate(date);};const displayData=flights.filter(flight=>{if(!from&&!to&&!date)return true;let check=flight.from.replace(/\\s/g,\"\").toLowerCase()===from.replace(/\\s/g,\"\").toLowerCase()&&flight.to.replace(/\\s/g,\"\").toLowerCase()===to.replace(/\\s/g,\"\").toLowerCase();if(check&&!date){return true;}if(check&&flight.departureDate===date)return true;return false;});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(Navigation,{})}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"section\",{className:\"section-flight\",children:/*#__PURE__*/_jsx(SearchFlightsForm,{applyFilterCallback:applyFilter})}),/*#__PURE__*/_jsx(FlightList,{flightData:displayData})]}),/*#__PURE__*/_jsx(\"footer\",{children:/*#__PURE__*/_jsx(Footer,{})})]});}export default FlightPage;","map":{"version":3,"names":["React","useState","useEffect","Navigation","Footer","FlightList","SearchFlightsForm","getDatabase","ref","onValue","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FlightPage","props","flights","setFlights","from","setFrom","to","setTo","date","setDate","db","flightRef","unregisterFunction","snapshot","allFlightObject","val","allFlightKeys","Object","keys","allFlightsArray","map","key","singleFlightCopy","applyFilter","displayData","filter","flight","check","replace","toLowerCase","departureDate","children","className","applyFilterCallback","flightData"],"sources":["/Users/muhammadputra/Desktop/JavaAir/frontend/src/components/FlightPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Navigation } from \"./navigation/Navigation\";\nimport { Footer } from \"./footer/Footer\";\nimport FlightList from \"./card/FlightList\";\nimport { SearchFlightsForm } from \"./form/SearchFlightForm\";\nimport { getDatabase, ref, onValue } from \"firebase/database\";\n\nexport function FlightPage(props) {\n  const [flights, setFlights] = useState([]);\n  const [from, setFrom] = useState(\"\");\n  const [to, setTo] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n\n  useEffect(() => {\n    const db = getDatabase();\n    const flightRef = ref(db, \"flight\");\n\n    const unregisterFunction = onValue(flightRef, (snapshot) => {\n      const allFlightObject = snapshot.val();\n\n      if (allFlightObject) {\n        const allFlightKeys = Object.keys(allFlightObject);\n\n        const allFlightsArray = allFlightKeys.map((key) => {\n          const singleFlightCopy = { ...allFlightObject[key], key };\n          return singleFlightCopy;\n        });\n\n        setFlights(allFlightsArray);\n      } else {\n        setFlights([]);\n      }\n    });\n\n    return () => {\n      unregisterFunction();\n    };\n  }, []);\n\n  const applyFilter = (from, to, date) => {\n    setFrom(from);\n    setTo(to);\n    setDate(date);\n  };\n\n  const displayData = flights.filter((flight) => {\n    if (!from && !to && !date) return true;\n    let check =\n      flight.from.replace(/\\s/g, \"\").toLowerCase() ===\n        from.replace(/\\s/g, \"\").toLowerCase() &&\n      flight.to.replace(/\\s/g, \"\").toLowerCase() ===\n        to.replace(/\\s/g, \"\").toLowerCase();\n    if (check && !date) {\n      return true;\n    }\n    if (check && flight.departureDate === date) return true;\n    return false;\n  });\n\n  return (\n    <>\n      <header>\n        <Navigation />\n      </header>\n      <main>\n        <section className=\"section-flight\">\n          <SearchFlightsForm applyFilterCallback={applyFilter} />\n        </section>\n        <FlightList flightData={displayData} />\n      </main>\n      <footer>\n        <Footer />\n      </footer>\n    </>\n  );\n}\n\nexport default FlightPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}